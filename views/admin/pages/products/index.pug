extends ../../layouts/default.pug
include ../../mixins/button-status.pug
include ../../mixins/search.pug
include ../../mixins/button-navigation.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug

block main 

    +alert-success()

    h1 Danh sach san pham

    .card.mb-3
        .card-header
            | Bộ lọc và tìm kiếm 
        .card-body
            .row 
                .col-6
                    +button-status(filterStatus)
                .col-6 
                    +search(keyword)

    
    .card.mb-3
        .card-header Sắp xếp 
        .card-body 
            .row 
                .col-4 
                    div(sort)
                        select(
                            name="sort"
                            class="form-control"
                            sort-select
                            ) 
                            option(disabled selected) -- Chon hanh dong --
                            option(value="position-desc") Vị trí giảm dần 
                            option(value="position-asc") Vị trí tăng dần
                            option(value="price-desc") Gía giảm dần
                            option(value="price-asc") Gía tăng dần
                            option(value="title-asc") Tiêu đề A-Z
                            option(value="title-desc") Tiêu đề Z-A


    .card.mb-3 
        .card-header Danh Sach 
            .card-body
                .row    
                    .col-8
                        +form-change-multi(prefixAdmin)
                    .col-4 
                        a(
                            href=`${prefixAdmin}/products/create`
                            class="btn btn-outline-success"
                        ) + Thêm mới 
                        
                table(
                    class="table table-hover table-sm"
                    checkbox-multi
                )
                    thead
                        tr  
                            th
                                input(type="checkbox" name="checkall")
                            th STT 
                            th Hinh anh 
                            th Tieu de
                            th Gia
                            th Vi tri
                            th Trang thai 
                            th Hanh dong
                    tbody
                        each item, index in products
                            tr
                                td 
                                     input(type="checkbox" name="id"
                                     value=item.id)
                                td #{index + 1}
                                td 
                                    img(
                                        src=item.thumbnail, 
                                        alt=item.title,
                                        width= "100px",
                                        height= "80px"
                                        )
                                td #{item.title}
                                td #{item.price}$
                                td 
                                    input(
                                        type="number"
                                        value=item.position 
                                        style="width: 40px"
                                        name="position"
                                        min=1
                                    )
                                td 
                                    if(item.status == "active")
                                        a(
                                            href="javascript:;"
                                            data-status="active"
                                            data-id=item.id
                                            button-change-status
                                            class="badge badge-success"
                                        ) Hoạt động
                                    else 
                                        a(
                                            href="javascript:;"
                                            data-status="inactive"
                                            data-id=item.id
                                            button-change-status
                                            class="badge badge-danger"
                                        ) Dừng hoạt động
                                td  
                                    a(  
                                        href=`${prefixAdmin}/products/detail/${item.id}`
                                        class="btn btn-secondary btn-sm"
                                        type='button'
                                    ) Chi tiết
                                    a(  
                                        href=`${prefixAdmin}/products/edit/${item.id}`
                                        class="btn btn-danger btn-sm"
                                        type='button'
                                    ) Sửa
                                    button(
                                            class="btn btn-warning btn-sm ml-1"
                                            data-id=item.id
                                            button-delete
                                        ) Xóa

    nav
        +navigation(objectPagination)
    form(  
        action=""
        form-change-status 
        method="POST"  
        path=`${prefixAdmin}/products/change-status`
        ) 

    form(  
        action=""
        form-delete-item
        method="POST"  
        path=`${prefixAdmin}/products/delete`
        ) 

    script(src="/admin/js/products.js")
            
            
            